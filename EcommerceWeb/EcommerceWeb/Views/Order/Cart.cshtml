@{
    ViewBag.Title = "Cart";
    Layout = "~/Views/Shared/_CustomerLayout.cshtml";
}

<!-- ✅ Cart Page CSS -->
<style>
    /* General page style */
    .cart-title {
        text-align: center;
        font-size: 2rem;
        font-weight: 600;
        margin: 20px 0;
        color: #444;
    }

    /* Cart container */
    .cart-container {
        max-width: 900px;
        margin: auto;
        background: #fff;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    /* Table styling */
    .cart-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
        font-size: 1rem;
    }

        .cart-table th {
            background: #f8f9fa;
            padding: 12px;
            font-weight: 600;
            border-bottom: 2px solid #dee2e6;
            text-align: center;
        }

        .cart-table td {
            padding: 12px;
            border-bottom: 1px solid #dee2e6;
            vertical-align: middle;
        }

    /* Quantity buttons */
    .qty-controls {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
    }

    .btn-qty {
        width: 34px;
        height: 34px;
        border: none;
        border-radius: 6px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .btn-minus {
        background-color: #dc3545;
        color: #fff;
    }

    .btn-plus {
        background-color: #198754;
        color: #fff;
    }

    .btn-qty:hover {
        transform: scale(1.1);
        opacity: 0.9;
    }

    .qty-value {
        min-width: 28px;
        text-align: center;
        font-weight: 500;
    }

    /* Remove button */
    .btn-remove {
        background-color: transparent;
        color: #dc3545;
        font-weight: 600;
        text-decoration: none;
        border: 1px solid #dc3545;
        padding: 5px 12px;
        border-radius: 6px;
        transition: all 0.2s ease;
    }

        .btn-remove:hover {
            background-color: #dc3545;
            color: #fff;
        }

    /* Total row */
    .total-row {
        font-weight: bold;
        background: #f1f3f5;
    }

        .total-row td {
            padding: 14px;
            font-size: 1.1rem;
        }

    /* Checkout button */
    .checkout-form {
        text-align: right;
    }

    .btn-checkout {
        background-color: #0d6efd;
        color: white;
        font-weight: 600;
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        transition: all 0.3s ease;
    }

        .btn-checkout:hover {
            background-color: #0b5ed7;
            transform: translateY(-2px);
        }

        .btn-checkout:disabled {
            background-color: #adb5bd;
            cursor: not-allowed;
        }
</style>

@{
    if (TempData["Msg"] != null)
    {
        <p class="alert alert-danger text-center">@TempData["Msg"]</p>
    }
}

<h2 class="cart-title">🛒 Shopping Cart</h2>

@{
    decimal total = 0;
}

<div class="cart-container">
    <table class="cart-table">
        <thead>
            <tr>
                <th>Product Name</th>
                <th class="text-center">Quantity</th>
                <th class="text-center">Price</th>
                <th class="text-center">Remove</th>
            </tr>
        </thead>
        <tbody>
            @if (Model != null)
            {
                foreach (var item in Model)
                {
                    <tr>
                        <td>@item.Name</td>
                        <td class="text-center">
                            <div class="qty-controls">
                                <button onclick="decreaseQty(@item.Id)" class="btn-qty btn-minus">-</button>
                                <span id="Qty-@item.Id" class="qty-value">@item.Qty</span>
                                <button onclick="increaseQty(@item.Id)" class="btn-qty btn-plus">+</button>
                            </div>
                        </td>
                        <td class="text-center">@item.Price</td>
                        <td class="text-center">
                            <a href="/Order/RemoveFromCart/@item.Id" class="btn-remove">Remove</a>
                        </td>
                    </tr>
                    {
                        total += item.Qty * item.Price;
                    }
                }
                <tr class="total-row">
                    <td colspan="3" class="text-end">Grand Total</td>
                    <td class="text-center">
                        <span id="TotalPrice">@total</span>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    @if (Model != null)
    {
        <form method="post" action="/Order/PlaceOrder" class="checkout-form">
            <input type="hidden" name="total" value="@total" />
            <input type="hidden" name="totalProduct" value="@Model.Count" />

            <input id="BtnPlaceOrder" type="submit"
                   value="Place Order"
                   @(total == 0 ? "disabled" : "")
                   class="btn-checkout" />
        </form>
    }
</div>

<script src="~/Scripts/Order/cart.js"></script>
